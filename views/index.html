<!DOCTYPE html>
<html ng-app="gallery" ng-controller="ItemController as itemCtrl" ng-init="init()"> 
  <head>
    <link rel="stylesheet" type="text/css" href="../stylesheets/bootstrap.css" />
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"> 
	<link rel="stylesheet" type="text/css" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.3.7/slick.css"/>
	<style type="text/css">
		h2{
			margin: 0;     
			color: #D0D0D0;
			padding-top: 20px;
			font-size: 30px;
			font-family: "trebuchet ms", sans-serif;    
		}
		.item{
			text-align: center;
			height: 200px;
		}
		.carousel{
			margin-top: 20px;
		}
		.bs-example{
			margin: 20px;
		}
	</style> 
	<script type="text/javascript" src="//code.jquery.com/jquery-1.11.1.min.js"></script>
	<script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
   	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"></script>
	<script type="text/javascript" src="../controllers/app.js"></script>
	<script type="text/javascript" src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js"></script>
	<script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.3.7/slick.min.js"></script>
	<script type="text/javascript" src="../javascripts/scripts.js"></script>
	<script type="text/javascript" src="../javascripts/bootstrap.file-input.js"></script>
	<script type="text/javascript" src="../javascripts/jquery.elevatezoom.js"></script>
  </head>
  <body>
	<div class="container" ng-controller="ContainerController as containerCtrl">
		<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
				  <a class="navbar-brand" href="#">Sage</a>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li ng-class="{active: panel.isSelected(0)}">
							<a href="#" ng-click="itemCtrl.getItems('All'); panel.selectTab(0); containerCtrl.selectTab(0)">Home</a>
						</li>
						<li ng-class="{active: panel.isSelected(1)}">
							<a href="#mobileapps" ng-click="itemCtrl.getItems('Mobile Apps'); panel.selectTab(1); containerCtrl.selectTab(0)">Mobile Apps</a>
						</li>
						<li ng-class="{active: panel.isSelected(2)}">
							<a href="#dashboards" ng-click="itemCtrl.getItems('Dashboards'); panel.selectTab(2); containerCtrl.selectTab(0)">Dashboards</a>
						</li>
						<li ng-class="{active: panel.isSelected(3)}">
							<a href="#workflows" ng-click="itemCtrl.getItems('Workflows'); panel.selectTab(3); containerCtrl.selectTab(0)">Workflows</a>
						</li>
						<li ng-class="{active: panel.isSelected(4)}">
							<a href="#activities" ng-click="itemCtrl.getItems('Activities'); panel.selectTab(4); containerCtrl.selectTab(0)">Activities</a>
						</li>
					</ul>
					<script>
						var referrer = document.referrer;
						if (referrer.length > 0){
							document.write('<ul class="nav navbar-nav navbar-right"><li><a id="addproduct" ng-click="containerCtrl.selectTab(2)" ng-show="false">Add a product</a></li></ul>');
						}
						else{
							//A enlever apr√®s test
							document.write('<ul class="nav navbar-nav navbar-right"><li><a id="addproduct" ng-click="containerCtrl.selectTab(2)" ng-show="false">Add a product</a></li></ul>');	
						} 
					</script>
				</div>
			</div>
		</div>
						
		<div class="row" ng-show="containerCtrl.isSelected(0)">		
			<div class="col-xs-6 col-md-3" ng-repeat="item in itemCtrl.items">
				<div class="thumbnail">
					<a ng-click="itemCtrl.getItem(item.name); containerCtrl.selectTab(1)">
						<img style="min-width : 100px; min-height : 100px; max-width : 100px; max-height : 100px" data-ng-src='https://gallerie.blob.core.windows.net/images/{{item.file}}.jpg'/>
					</a>
					<div class="caption">
						<p>{{item.name}}</p>
						<p>
							<script>
								referrer = document.referrer;
								if (referrer.length == 0){
									document.write('<a name="download" class="btn btn-xs btn-success" href="/product/download?{{item.link}}">download this item</a>'); 									
								} else {
									document.write('<a name="install" class="btn btn-xs btn-danger" href="/product/install?{{item.link}}">install this item</a>');	
								}
							</script>
						</p>
					</div>
				</div>
			</div>
		</div>	
		
		<div class="row" ng-show="containerCtrl.isSelected(1)">
			<div class="panel panel-default" ng-repeat="item in itemCtrl.items">
				<div class="panel-heading">
					<h3> {{item.name}} </h3>	
				</div>
				<div class="panel-body">
					<img width='20%' align='left' style='margin-right:10px' ng-src='https://gallerie.blob.core.windows.net/images/{{item.file}}.jpg'/>					
					<p>{{item.description}}</p>
					<p>
						<script>
							var referrer = document.referrer;
							if (referrer.length == 0){
								document.write('<a name="download" class="btn btn-xs btn-success" href="/product/download?{{item.link}}">download this item</a>'); 			
							} else {
								document.write('<a name="install" class="btn btn-xs btn-danger postinstall" href="/product/install?{{item.link}}">install this item</a>');	
							}
						</script>
					</p>
				</div>
			</div>	
			
			<img id="img_01" src="../img/lazyfonz1.png"/>
			
			<div id="gal1">
				<a href="#" data-image="../img/lazyfonz1.png" data-zoom-image="../img/lazyfonz1.png"/>
					<img class="img_02" src="../img/lazyfonz1.png"/>
				</a>
				<a href="#" data-image="../img/lazyfonz2.png" data-zoom-image="../img/lazyfonz2.png"/>
					<img class="img_02" src="../img/lazyfonz2.png"/>
				</a>
				<a href="#" data-image="../img/lazyfonz3.png" data-zoom-image="../img/lazyfonz3.png"/>
					<img class="img_02" src="../img/lazyfonz3.png"/>
				</a>
				<a href="#" data-image="../img/lazyfonz4.png" data-zoom-image="../img/lazyfonz4.png"/>
					<img class="img_02" src="../img/lazyfonz4.png"/>
				</a>
				<a href="#" data-image="../img/lazyfonz5.png" data-zoom-image="../img/lazyfonz5.png"/>
					<img class="img_02" src="../img/lazyfonz5.png"/>
				</a>
				<a href="#" data-image="../img/lazyfonz6.png" data-zoom-image="../img/lazyfonz6.png"/>
					<img class="img_02" src="../img/lazyfonz6.png"/>
				</a>
			</div>	
		</div>	
		
		<div class="row" ng-show="containerCtrl.isSelected(2)">
			<h1>Add a product</h1>
			<div class="col-sm-6 col-md-4 col-md-offset-4 border-top-radius">
				<form method="POST" enctype="multipart/form-data" action="/addProduct">
					<fieldset>
						<div class="form-group">
							<label for="inputName">Name</label>
							<input type="text" class="form-control" name="inputName" id="inputName" placeholder="Name">
						</div>
						<div class="form-group">
							<label for="inputDescription">Description</label>
							<input type="textarea" class="form-control" name="inputDescription" id="inputDescription" placeholder="Description">
						</div>
						<div class="form-group">
							<label for="inputCategory">Category</label>	
							<select class="form-control" name="inputCategory">
								<option value="Activities">Activities</option>	
								<option value="Dashboards">Dashboards</option>
								<option value="Mobile Apps">Mobile Apps</option>
								<option value="Workflows">Workflows</option>
							</select>
						</div>
						<div class="form-group">
							<label for="inputImage">Image</label>
							<input type="file" accept=".jpg,.jpeg" id="inputImage" name="inputImage" data-filename-placement="inside">
						</div>
						<div class="form-group">
							<label for="inputPackage">Package</label>
							<input type="file" accept=".zip" id="inputPackage" name="inputPackage" data-filename-placement="inside">
						</div>
						<button type="submit" class="btn btn-primary">Submit</button>
					</fieldset>
				</form>
			</div>
		</div>
		
		<nav class="navbar navbar-inverse navbar-fixed-bottom" role="navigation">
			<div class="container">
				
			</div>
		</nav>
	</div>
	<script>
		$(function(){
			$(".img_02").bind("click", function(e) {
				$(".postinstall");			
				$('#img_01').attr('src', this.src);	
				return true; 
			});	
			
			$.getJSON( "http://www.telize.com/jsonip", function(data){
				if(data.ip == '193.30.141.1' || data.ip == '193.30.141.2'){
					$('#addproduct').attr('class','ng-show');
				}
			});
		});
	  </script>
  </body>
</html>
